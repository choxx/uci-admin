import { Injectable } from '@angular/core';
import { BaseService } from './base.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "./global.service";
export class UciService extends BaseService {
    constructor(http, globalService) {
        super(http, globalService);
        this.http = http;
        this.globalService = globalService;
        this.FORM_BASE_URL = 'https://dev.sunbirded.org/';
        this.globalService.baseUrl$.subscribe(value => {
            if (value) {
                this.BASE_URL = value + '/admin/v1/';
                this.DATASET_URL = value.replace('/uci') + '/dataset/v1/';
            }
        });
    }
    fetchConversation(params) {
        return this.getRequest(this.BASE_URL + 'bot/get', params, { asset: 'bot' });
    }
    searchConversation(params) {
        return this.getRequest(this.BASE_URL + 'bot/search', params, { asset: 'bot' });
    }
    pauseConversation(botId) {
        return this.getRequest(this.BASE_URL + `bot/pause/${botId}`, {}, { asset: 'bot' });
    }
    startConversation(botId) {
        return this.getRequest(this.BASE_URL + `bot/start/${botId}`, {}, { asset: 'bot' });
    }
    deleteConversation(botId) {
        return this.getRequest(this.BASE_URL + `bot/delete/${botId}`, {}, { asset: 'bot' });
    }
    getBotDetails(id) {
        return this.getRequest(this.BASE_URL + `bot/get/${id}`, {}, { asset: 'bot' });
    }
    getCheckStartingMessage(param) {
        return this.getRequest(this.BASE_URL + `bot/getByParam`, param, { asset: 'bot' });
    }
    botCreate(data) {
        return this.postRequest(this.BASE_URL + 'bot/create', data, { asset: 'bot' });
    }
    botUpdate(id, data) {
        return this.postRequest(this.BASE_URL + `bot/update/${id}`, data, { asset: 'bot' });
    }
    // User Segment APIs
    fetchUserSegment(params) {
        return this.getRequest(this.BASE_URL + 'userSegment/get', params, { asset: 'userSegment' });
    }
    searchUserSegment(params) {
        return this.getRequest(this.BASE_URL + 'userSegment/search', params, { asset: 'userSegment' });
    }
    createUserSegment(data) {
        return this.postRequest(this.BASE_URL + 'userSegment/create', data, { asset: 'userSegment' });
    }
    userSegmentQueryBuilder(data) {
        return this.postRequest(this.BASE_URL + 'userSegment/queryBuilder', data, { asset: 'userSegment' });
    }
    // Conversation APIs
    createLogic(data) {
        return this.postRequest(this.BASE_URL + 'conversationLogic/create', data, { asset: 'conversationLogic' });
    }
    updateLogic(id, data) {
        return this.postRequest(this.BASE_URL + `conversationLogic/update/${id}`, data, { asset: 'conversationLogic' });
    }
    deleteLogic(id) {
        return this.getRequest(this.BASE_URL + `conversationLogic/delete/${id}`, {}, { asset: 'conversationLogic' });
    }
    // Mis APIs
    uploadFile(obj) {
        return this.postRequest(this.BASE_URL + 'forms/upload', this.toFormData(obj));
    }
    readForm(data) {
        return this.postRequest(this.FORM_BASE_URL + 'api/data/v1/form/read', data);
    }
    // Exhaust API
    getJobList(id, params) {
        return this.getRequest(this.DATASET_URL + `request/list/${id}`, params, { asset: 'conversationLogic' });
    }
    getJobInfo(id, params) {
        return this.getRequest(this.DATASET_URL + `request/read/${id}`, params, { asset: 'conversationLogic' });
    }
    submitExhaust(data) {
        return this.postRequest(this.DATASET_URL + `request/submit`, data, { asset: 'conversationLogic' });
    }
}
UciService.ɵfac = function UciService_Factory(t) { return new (t || UciService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.GlobalService)); };
UciService.ɵprov = i0.ɵɵdefineInjectable({ token: UciService, factory: UciService.ɵfac, providedIn: 'root' });
/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(UciService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: i1.HttpClient }, { type: i2.GlobalService }]; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWNpLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac2FtYWdyYS14L3VjaS1jb25zb2xlLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL3VjaS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFekMsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGdCQUFnQixDQUFDOzs7O0FBTzNDLE1BQU0sT0FBTyxVQUFXLFNBQVEsV0FBVztJQUt2QyxZQUFtQixJQUFnQixFQUFTLGFBQTRCO1FBQ3BFLEtBQUssQ0FBQyxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFEWixTQUFJLEdBQUosSUFBSSxDQUFZO1FBQVMsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFGeEUsa0JBQWEsR0FBRyw0QkFBNEIsQ0FBQztRQUl6QyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDMUMsSUFBSSxLQUFLLEVBQUU7Z0JBQ1AsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLEdBQUcsWUFBWSxDQUFDO2dCQUNyQyxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsY0FBYyxDQUFDO2FBQzdEO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsaUJBQWlCLENBQUMsTUFBTTtRQUNwQixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLEVBQUUsTUFBTSxFQUFFLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7SUFDOUUsQ0FBQztJQUVELGtCQUFrQixDQUFDLE1BQU07UUFDckIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsWUFBWSxFQUFFLE1BQU0sRUFBRSxFQUFDLEtBQUssRUFBRSxLQUFL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T0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUcsZ0JBQWdCLEVBQUUsSUFBSSxFQUFFLEVBQUMsS0FBSyxFQUFFLG1CQUFtQixFQUFDLENBQUMsQ0FBQztJQUNyRyxDQUFDOztvRUFyR1EsVUFBVTtrREFBVixVQUFVLFdBQVYsVUFBVSxtQkFGUCxNQUFNO2tEQUVULFVBQVU7Y0FIdEIsVUFBVTtlQUFDO2dCQUNSLFVBQVUsRUFBRSxNQUFNO2FBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7SHR0cENsaWVudH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHtCYXNlU2VydmljZX0gZnJvbSAnLi9iYXNlLnNlcnZpY2UnO1xuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICdyeGpzJztcbmltcG9ydCB7R2xvYmFsU2VydmljZX0gZnJvbSAnLi9nbG9iYWwuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKHtcbiAgICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgVWNpU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcbiAgICBCQVNFX1VSTDtcbiAgICBEQVRBU0VUX1VSTDtcbiAgICBGT1JNX0JBU0VfVVJMID0gJ2h0dHBzOi8vZGV2LnN1bmJpcmRlZC5vcmcvJztcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBodHRwOiBIdHRwQ2xpZW50LCBwdWJsaWMgZ2xvYmFsU2VydmljZTogR2xvYmFsU2VydmljZSkge1xuICAgICAgICBzdXBlcihodHRwLCBnbG9iYWxTZXJ2aWNlKTtcbiAgICAgICAgdGhpcy5nbG9iYWxTZXJ2aWNlLmJhc2VVcmwkLnN1YnNjcmliZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkJBU0VfVVJMID0gdmFsdWUgKyAnL2FkbWluL3YxLyc7XG4gICAgICAgICAgICAgICAgdGhpcy5EQVRBU0VUX1VSTCA9IHZhbHVlLnJlcGxhY2UoJy91Y2knKSArICcvZGF0YXNldC92MS8nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmZXRjaENvbnZlcnNhdGlvbihwYXJhbXMpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyAnYm90L2dldCcsIHBhcmFtcywge2Fzc2V0OiAnYm90J30pO1xuICAgIH1cblxuICAgIHNlYXJjaENvbnZlcnNhdGlvbihwYXJhbXMpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyAnYm90L3NlYXJjaCcsIHBhcmFtcywge2Fzc2V0OiAnYm90J30pO1xuICAgIH1cblxuICAgIHBhdXNlQ29udmVyc2F0aW9uKGJvdElkKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgYGJvdC9wYXVzZS8ke2JvdElkfWAsIHt9LCB7YXNzZXQ6ICdib3QnfSk7XG4gICAgfVxuXG4gICAgc3RhcnRDb252ZXJzYXRpb24oYm90SWQpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyBgYm90L3N0YXJ0LyR7Ym90SWR9YCwge30sIHthc3NldDogJ2JvdCd9KTtcbiAgICB9XG5cbiAgICBkZWxldGVDb252ZXJzYXRpb24oYm90SWQpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyBgYm90L2RlbGV0ZS8ke2JvdElkfWAsIHt9LCB7YXNzZXQ6ICdib3QnfSk7XG4gICAgfVxuXG4gICAgZ2V0Qm90RGV0YWlscyhpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyBgYm90L2dldC8ke2lkfWAsIHt9LCB7YXNzZXQ6ICdib3QnfSk7XG4gICAgfVxuXG4gICAgZ2V0Q2hlY2tTdGFydGluZ01lc3NhZ2UocGFyYW0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgYGJvdC9nZXRCeVBhcmFtYCwgcGFyYW0sIHthc3NldDogJ2JvdCd9KTtcbiAgICB9XG5cbiAgICBib3RDcmVhdGUoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgJ2JvdC9jcmVhdGUnLCBkYXRhLCB7YXNzZXQ6ICdib3QnfSk7XG4gICAgfVxuXG4gICAgYm90VXBkYXRlKGlkLCBkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyBgYm90L3VwZGF0ZS8ke2lkfWAsIGRhdGEsIHthc3NldDogJ2JvdCd9KTtcbiAgICB9XG5cbiAgICAvLyBVc2VyIFNlZ21lbnQgQVBJc1xuICAgIGZldGNoVXNlclNlZ21lbnQocGFyYW1zKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgJ3VzZXJTZWdtZW50L2dldCcsIHBhcmFtcywge2Fzc2V0OiAndXNlclNlZ21lbnQnfSk7XG4gICAgfVxuXG4gICAgc2VhcmNoVXNlclNlZ21lbnQocGFyYW1zKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgJ3VzZXJTZWdtZW50L3NlYXJjaCcsIHBhcmFtcywge2Fzc2V0OiAndXNlclNlZ21lbnQnfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlVXNlclNlZ21lbnQoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgJ3VzZXJTZWdtZW50L2NyZWF0ZScsIGRhdGEsIHthc3NldDogJ3VzZXJTZWdtZW50J30pO1xuICAgIH1cblxuICAgIHVzZXJTZWdtZW50UXVlcnlCdWlsZGVyKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFJlcXVlc3QodGhpcy5CQVNFX1VSTCArICd1c2VyU2VnbWVudC9xdWVyeUJ1aWxkZXInLCBkYXRhLCB7YXNzZXQ6ICd1c2VyU2VnbWVudCd9KTtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJzYXRpb24gQVBJc1xuICAgIGNyZWF0ZUxvZ2ljKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFJlcXVlc3QodGhpcy5CQVNFX1VSTCArICdjb252ZXJzYXRpb25Mb2dpYy9jcmVhdGUnLCBkYXRhLCB7YXNzZXQ6ICdjb252ZXJzYXRpb25Mb2dpYyd9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVMb2dpYyhpZCwgZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgYGNvbnZlcnNhdGlvbkxvZ2ljL3VwZGF0ZS8ke2lkfWAsIGRhdGEsIHthc3NldDogJ2NvbnZlcnNhdGlvbkxvZ2ljJ30pO1xuICAgIH1cblxuICAgIGRlbGV0ZUxvZ2ljKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5CQVNFX1VSTCArIGBjb252ZXJzYXRpb25Mb2dpYy9kZWxldGUvJHtpZH1gLCB7fSwge2Fzc2V0OiAnY29udmVyc2F0aW9uTG9naWMnfSk7XG4gICAgfVxuXG4gICAgLy8gTWlzIEFQSXNcbiAgICB1cGxvYWRGaWxlKG9iaik6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyAnZm9ybXMvdXBsb2FkJywgdGhpcy50b0Zvcm1EYXRhKG9iaikpO1xuICAgIH1cblxuICAgIHJlYWRGb3JtKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFJlcXVlc3QodGhpcy5GT1JNX0JBU0VfVVJMICsgJ2FwaS9kYXRhL3YxL2Zvcm0vcmVhZCcsIGRhdGEpO1xuICAgIH1cblxuICAgIC8vIEV4aGF1c3QgQVBJXG4gICAgZ2V0Sm9iTGlzdChpZCwgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5EQVRBU0VUX1VSTCArIGByZXF1ZXN0L2xpc3QvJHtpZH1gLCBwYXJhbXMsIHthc3NldDogJ2NvbnZlcnNhdGlvbkxvZ2ljJ30pO1xuICAgIH1cblxuICAgIGdldEpvYkluZm8oaWQsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuREFUQVNFVF9VUkwgKyBgcmVxdWVzdC9yZWFkLyR7aWR9YCwgcGFyYW1zLCB7YXNzZXQ6ICdjb252ZXJzYXRpb25Mb2dpYyd9KTtcbiAgICB9XG5cbiAgICBzdWJtaXRFeGhhdXN0KGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFJlcXVlc3QodGhpcy5EQVRBU0VUX1VSTCArIGByZXF1ZXN0L3N1Ym1pdGAsIGRhdGEsIHthc3NldDogJ2NvbnZlcnNhdGlvbkxvZ2ljJ30pO1xuICAgIH1cbn1cbiJdfQ==